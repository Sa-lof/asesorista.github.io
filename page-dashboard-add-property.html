<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="advanced search, agency, agent, classified, directory, house, listing, property, real estate, real estate agency, real estate agent, realestate, realtor, rental">
<meta name="description" content="Homez - Real Estate HTML Template">
<meta name="CreativeLayers" content="ATFN">
<!-- css file -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/ace-responsive-menu.css">
<link rel="stylesheet" href="css/menu.css">
<link rel="stylesheet" href="css/fontawesome.css">
<link rel="stylesheet" href="css/flaticon.css">
<link rel="stylesheet" href="css/bootstrap-select.min.css">
<link rel="stylesheet" href="css/ud-custom-spacing.css">
<link rel="stylesheet" href="css/animate.css">
<link rel="stylesheet" href="css/slider.css">
<link rel="stylesheet" href="css/jquery-ui.min.css">
<link rel="stylesheet" href="css/magnific-popup.css">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/dashbord_navitaion.css">
<!-- Responsive stylesheet -->
<link rel="stylesheet" href="css/responsive.css">
<!-- Title -->
<title>Asesorista</title>
<!-- Favicon -->
<link rel="apple-touch-icon" href="images/favicon.png" />
<link
  rel="shortcut icon"
  type="image/x-icon"
  href="images/favicon.png"
/>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
<div class="wrapper">
  <div class="preloader"></div>
  
  <!-- Main Header Nav -->
  <header class="header-nav nav-innerpage-style menu-home4 dashboard_header main-menu">
    <!-- Ace Responsive Menu -->
    <nav class="posr"> 
      <div class="container-fluid pr30 pr15-xs pl30 posr menu_bdrt1">
        <div class="row align-items-center justify-content-between">
          <div class="col-6 col-lg-auto">
            <div class="text-center text-lg-start d-flex align-items-center">
              <div class="dashboard_header_logo position-relative me-2 me-xl-5">
                <a href="index.html" class="logo"><img src="images/footer-logo.png" alt="" style="width: 180px;"></a>
              </div>
              <div class="fz20 ms-2 ms-xl-5">
                <a href="#" class="dashboard_sidebar_toggle_icon text-thm1 vam"><img src="images/dark-nav-icon.svg" alt=""></a>
              </div>
            </div>
          </div>
          <div class="d-none d-lg-block col-lg-auto">
            <!-- Responsive Menu Structure-->
            <ul id="respMenu" class="ace-responsive-menu" data-menu-style="horizontal">
            </ul>
          </div>
          <div class="col-6 col-lg-auto">
            <div class="text-center text-lg-end header_right_widgets">
              <ul class="mb0 d-flex justify-content-center justify-content-sm-end p-0">
                <li class=" user_setting">
                  <div class="dropdown">
                    <a class="btn" href="#" data-bs-toggle="dropdown">
                      <img src="images/favicon.png" style="width: 40px;" alt="user.png"> 
                    </a>
                    <div class="dropdown-menu">
                      <div class="user_setting_content">
                        <p class="fz15 fw400 ff-heading mt30">MANAGE LISTINGS</p>
                        <a class="dropdown-item active" href="page-dashboard-add-property.html"><i class="flaticon-new-tab mr10"></i>Agregar propiedad</a>
                        <a class="dropdown-item" href="page-dashboard-properties.html"><i class="flaticon-home mr10"></i>Mis propiedades</a>
                        <p class="fz15 fw400 ff-heading mt30">MANAGE ACCOUNT</p>
                        <a class="dropdown-item" href="administrador.html"><i class="flaticon-exit mr10"></i>Logout</a>
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>
  <!-- Menu In Hiddn SideBar -->
  <div class="rightside-hidden-bar">
    <div class="hsidebar-header">
      <div class="sidebar-close-icon"><span class="far fa-times"></span></div>
      <h4 class="title">Welcome to Realton</h4>
    </div>
    <div class="hsidebar-content">
      <div class="hiddenbar_navbar_content">
        <div class="hiddenbar_navbar_menu">
          <ul class="navbar-nav">
            <li class="nav-item"> <a class="nav-link" href="" role="button">Apartments</a></li>
            <li class="nav-item"> <a class="nav-link" href="" role="button">Bungalow</a></li>
            <li class="nav-item"> <a class="nav-link" href="" role="button">Houses</a></li>
            <li class="nav-item"> <a class="nav-link" href="" role="button">Loft</a></li>
            <li class="nav-item"> <a class="nav-link" href="" role="button">Office</a></li>
            <li class="nav-item"> <a class="nav-link" href="" role="button">Townhome</a></li>
            <li class="nav-item"> <a class="nav-link" href="" role="button">Villa</a></li>
          </ul>
        </div>
        <div class="hiddenbar_footer position-relative bdrt1">
          <div class="row pt45 pb30 pl30">
            <div class="col-auto">
              <div class="contact-info">
                <p class="info-title dark-color">Total Free Customer Care</p>
                <h6 class="info-phone dark-color"><a href="+(0)-123-050-945-02">+(0) 123 050 945 02</a></h6>
              </div>
            </div>
            <div class="col-auto">
              <div class="contact-info">
                <p class="info-title dark-color">Nee Live Support?</p>
                <h6 class="info-mail dark-color"><a href="mailto:hi@homez.com">hi@homez.com</a></h6>
              </div>
            </div>
          </div>
          <div class="row pt30 pb30 bdrt1">
            <div class="col-auto">
              <div class="social-style-sidebar d-flex align-items-center pl30">
                <h6 class="me-4 mb-0">Follow us</h6>
                <a class="me-3" href=""><i class="fab fa-facebook-f"></i></a>
                <a class="me-3" href=""><i class="fab fa-twitter"></i></a>
                <a class="me-3" href=""><i class="fab fa-instagram"></i></a>
                <a class="me-3" href=""><i class="fab fa-linkedin-in"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--End Menu In Hiddn SideBar --> 
  <!-- Mobile Nav  -->
  <div id="page" class="mobilie_header_nav stylehome1">
    <div class="mobile-menu">
      <div class="header innerpage-style">
        <div class="menu_and_widgets">
          <div class="mobile_menu_bar d-flex justify-content-between align-items-center">
            <a href="index.html" class="logo"><img src="images/footer-logo.png" alt="" style="width: 180px;"></a>
            <li class=" user_setting">
              <div class="dropdown">
                <a class="btn" href="#" data-bs-toggle="dropdown">
                  <img src="images/favicon.png" style="width: 40px;" alt="user.png"> 
                </a>
                <div class="dropdown-menu">
                  <div class="user_setting_content">
                    <p class="fz15 fw400 ff-heading mt30">MANAGE LISTINGS</p>
                    <a class="dropdown-item" href="page-dashboard-add-property.html"><i class="flaticon-new-tab mr10"></i>Agregar propiedad</a>
                    <a class="dropdown-item" href="page-dashboard-order.html"><i class="flaticon-home mr10"></i>Mis propiedades</a>
                    <p class="fz15 fw400 ff-heading mt30">MANAGE ACCOUNT</p>
                    <a class="dropdown-item" href="administrador.html"><i class="flaticon-exit mr10"></i>Logout</a>
                  </div>
                </div>
              </div>
            </li>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard_content_wrapper">
    <div class="dashboard dashboard_wrapper pr30 pr0-md">
      <div class="dashboard__sidebar d-none d-lg-block">
        <div class="dashboard_sidebar_list">
          <p class="fz15 fw400 ff-heading">MANAGE LISTINGS</p>
          <div class="sidebar_list_item ">
            <a href="page-dashboard-add-property.html" class="items-center -is-active"><i class="flaticon-new-tab mr15"></i>Agregar propiedad</a>
          </div>
          <div class="sidebar_list_item ">
            <a href="page-dashboard-properties.html" class="items-center"><i class="flaticon-home mr15"></i>Mis propiedes</a>
          </div>
          <p class="fz15 fw400 ff-heading mt30">MANAGE ACCOUNT</p>
          <div class="sidebar_list_item ">
            <a href="administrador.html" class="items-center"><i class="flaticon-logout mr15"></i>Logout</a>
          </div>
        </div>
      </div>
      <div class="dashboard__main pl0-md">
        <div class="dashboard__content property-page bgc-f7">
          <div class="row pb40 d-block d-lg-none">
            <div class="col-lg-12">
              <div class="dashboard_navigationbar">
                <div class="dropdown">
                  <button onclick="myFunction()" class="dropbtn"><i class="fa fa-bars pr10"></i> Dashboard Navigation</button>
                  <ul id="myDropdown" class="dropdown-content">
                    <li><p class="fz15 fw400 ff-heading mt30 pl30">MANAGE LISTINGS</p></li>
                    <li><a href="page-dashboard-add-property.html"><i class="flaticon-new-tab mr10"></i>Agregar propiedad</a></li>
                    <li class="active"><a href="page-dashboard-properties.html"><i class="flaticon-home mr10"></i>Mis propiedades</a></li>
                    <li><p class="fz15 fw400 ff-heading mt30 pl30">MANAGE ACCOUNT</p></li>
                    <li><a class="" href="administrador.html"><i class="flaticon-exit mr10"></i>Logout</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="row align-items-center pb40">
            <div class="col-lg-12">
              <div class="dashboard_title_area">
                <h2>Registra la propiedad</h2>
                <p class="text">Llena los datos correspondientes a la propiedad</p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-12">
              <div class="ps-widget bgc-white bdrs12 default-box-shadow2 pt30 mb30 overflow-hidden position-relative">
                <div class="navtab-style1">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab2" role="tablist">
                      <button class="nav-link active fw600 ms-3" id="nav-item1-tab" data-bs-toggle="tab" data-bs-target="#nav-item1" type="button" role="tab" aria-controls="nav-item1" aria-selected="true">1. Datos personales</button>
                      <button class="nav-link fw600" id="nav-item2-tab" data-bs-toggle="tab" data-bs-target="#nav-item2" type="button" role="tab" aria-controls="nav-item2" aria-selected="false">2. Descipción</button>
                      <button class="nav-link fw600" id="nav-item3-tab" data-bs-toggle="tab" data-bs-target="#nav-item3" type="button" role="tab" aria-controls="nav-item3" aria-selected="false">3. Media</button>
                      <button class="nav-link fw600" id="nav-item4-tab" data-bs-toggle="tab" data-bs-target="#nav-item4" type="button" role="tab" aria-controls="nav-item4" aria-selected="false">4. Ubicación</button>
                      <button class="nav-link fw600" id="nav-item5-tab" data-bs-toggle="tab" data-bs-target="#nav-item5" type="button" role="tab" aria-controls="nav-item5" aria-selected="false">5. Detalles</button>
                    </div>
                  </nav>
                  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
                  <script>
                    $(document).ready(function() {
                      $(".ud-btn").click(function(e) {
                          e.preventDefault();

                          var currentTab = $(".tab-pane.active");
                          var nextTab, tabLink;

                          if ($(this).data("nav") === "prev") {
                              nextTab = currentTab.prev('.tab-pane');
                              if (!nextTab.length) return;
                              tabLink = $('#nav-item' + nextTab.attr('id').slice(-1) + '-tab');
                          } else {
                              nextTab = currentTab.next('.tab-pane');
                              if (!nextTab.length) return;
                              tabLink = $('#nav-item' + nextTab.attr('id').slice(-1) + '-tab');
                          }

                          tabLink.tab('show');
                      });
                    });

                  </script>
                  <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-item1" role="tabpanel" aria-labelledby="nav-item1-tab">
                      <div class="ps-widget bgc-white bdrs12 p30 overflow-hidden position-relative">
                        <div class="profile-box position-relative d-md-flex align-items-end mb50">
                          <div class="profile-img position-relative overflow-hidden bdrs12 mb20-sm">
                            <img class="w-100" src="images/listings/profile-1.jpg" alt="">
                            <a href="" class="tag-del" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Delete Image" aria-label="Delete Item"><span class="fas fa-trash-can"></span></a>
                          </div>
                          <div class="profile-content ml30 ml0-sm">
                            <!-- Hidden file input -->
                            <input type="file" id="profilePhoto" accept="image/jpeg, image/png" style="display: none;" />
                        
                            <!-- Styled label to act as the button -->
                            <label for="profilePhoto" class="ud-btn2 btn-white2 mb30">
                                Carga foto de perfil<i class="fal fa-arrow-right-long"></i>
                            </label>
                        
                            <p class="text">Las fotos deben de estar en formato JPEG o PNG y al menos 2048x768</p>
                          </div>
                        </div>
                        <form class="form-style1" id="vendedorForm">
                          <div class="row">
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Nombre vendedor</label>
                                <input type="text" class="form-control" name="nombre" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Apellido materno</label>
                                <input type="text" class="form-control" name="apellido_materno" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Apellido paterno</label>
                                <input type="text" class="form-control" name="apellido_paterno" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Teléfono</label>
                                <input type="text" class="form-control" name="telefono" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Puesto</label>
                                <input type="text" class="form-control" name="puesto" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Correo electrónico</label>
                                <input type="text" class="form-control" name="correo_electronico" placeholder="">
                              </div>
                            </div>
                            <div class="col-md-12">
                              <div class="d-sm-flex justify-content-between">
                                <button class="ud-btn btn-dark" type="submit" onclick="addVendedor()">Siguiente paso<i class="fal fa-arrow-right-long"></i></button>
                              </div>
                            </div>
                            <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.22.2"></script>
                          </div>
                        </form>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="nav-item2" role="tabpanel" aria-labelledby="nav-item2-tab">                      
                      <div class="ps-widget bgc-white bdrs12 p30 overflow-hidden position-relative">
                        <form class="form-style1">
                          <div class="row">
                            <div class="col-sm-12">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Nombre de la propiedad</label>
                                <input type="text" class="form-control"  name="nombre_propiedad_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-12">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Description</label>
                                <textarea cols="30" rows="5" name="description_in" placeholder="There are many variations of passages."></textarea>
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <div class="form-style1">
                                  <label class="form-label fw600 dark-color">Tipo de propiedad</label>
                                  <div class="bootselect-multiselect">
                                    <select class="selectpicker" id="tipo-propiedad-select" data-live-search="true" data-width="100%" name="tipo_propiedad_in">
                                      <option data-tokens="Casa">Casa</option>
                                      <option data-tokens="Apartamento">Apartamento</option>
                                      <option data-tokens="Oficina">Oficina</option>
                                      <option data-tokens="Local">Local</option>
                                      <option data-tokens="Otro">Otro</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Precio</label>
                                <input type="text" class="form-control" name="precio_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Años de antiguedad</label>
                                <input type="text" class="form-control" name="anos_antiguedad_in" placeholder="">
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-12">
                              <div class="d-sm-flex justify-content-between">
                                <a class="ud-btn btn-white" href="" data-nav="prev">Paso previo<i class="fal fa-arrow-right-long"></i></a>
                                <a class="ud-btn btn-dark" href="" data-nav="next">Siguiente paso<i class="fal fa-arrow-right-long"></i></a>
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="nav-item3" role="tabpanel" aria-labelledby="nav-item3-tab">
                      <div class="ps-widget bgc-white bdrs12 p30 overflow-hidden position-relative">
                        <div class="col-lg-12">
                          <div class="upload-img position-relative overflow-hidden bdrs12 text-center mb30 px-2">
                            <div class="icon mb30"><span class="flaticon-upload"></span></div>
                            <h4 class="title fz17 mb10">Sube fotos de tu propiedad</h4>
                            <p class="text mb25">Las fotos deben de estar en formato JPEG o PNG y al menos 2048x768</p>
                            <!-- Hidden file input -->
                            <input type="file" id="imagenesPropiedad" accept="image/jpeg, image/png" style="display: none;" />
                        
                            <!-- Styled label to act as the button -->
                            <label for="imagenesPropiedad" class="ud-btn2 btn-white2 mb30">
                                Carga una imagen<i class="fal fa-arrow-right-long"></i>
                            </label>
                          </div>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.22.2"></script>

                        <script>
                          const SUPABASE_URL = 'https://fhowgaxtehxvtcpiziyy.supabase.co'
                          const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZob3dnYXh0ZWh4dnRjcGl6aXl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTA2OTA1NjQsImV4cCI6MjAwNjI2NjU2NH0.ZOc7XrEmDevg35_FT-s0HUQgA4uvq900D80j31G7R20'

                          const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)
                        </script>
                        <script>
                          let id_imagenes = 0;
                          async function addVendedor2() {

                          const nombre = document.querySelector('[name="nombre"]').value;
                          const apellidoMaterno = document.querySelector('[name="apellido_materno"]').value;
                          const apellidoPaterno = document.querySelector('[name="apellido_paterno"]').value;
                          const correo = document.querySelector('[name="correo_electronico"]').value;
                          const telefono = document.querySelector('[name="telefono"]').value;
                          const puesto = document.querySelector('[name="puesto"]').value;

                          const { data: dataVendedor, error: errorVendedor } = await _supabase
                              .from('vendedores')
                              .insert([
                                  {
                                      nombre: nombre,
                                      apellido_materno: apellidoMaterno,
                                      apellido_paterno: apellidoPaterno,
                                      correo_electronico: correo,
                                      telefono: telefono,
                                      puesto: puesto,
                                  }
                          ]);

                          if (errorVendedor) {
                              console.error('Error inserting vendedor:', errorVendedor);
                              return;
                          } else {
                              console.log('Inserted vendedor:', dataVendedor);
                              if (dataVendedor && dataVendedor.length > 0) {
                                  const newVendedorId = dataVendedor[0].id;
                                  if (!newVendedorId) {
                                      console.error('Unable to extract vendedor ID. Check the structure of the response.');
                                      return;
                                  }
                              } else {
                                  console.error('No data returned after inserting vendedor.');
                                  return;
                              }
                          }

                          // Selección de los checkboxes
                          const garageCheckbox = document.getElementById('garageCheckbox');
                          const aticoCheckbox = document.getElementById('aticoCheckbox');
                          const estacionamientoCheckbox = document.getElementById('estacionamientoCheckbox');
                          const terrazaCheckbox = document.getElementById('terrazaCheckbox');
                          const lavadoCheckbox = document.getElementById('lavadoCheckbox');
                          const areaCheckbox = document.getElementById('areaCheckbox');



                          // Obtener el valor true o false de los checkboxes
                          let garageChecked = garageCheckbox.checked; // Será true si está marcado, false si no lo está.
                          let aticoChecked = aticoCheckbox.checked;   // Será true si está marcado, false si no lo está.
                          let estacionamientoChecked = estacionamientoCheckbox.checked; // Será true si está marcado, false si no lo está.
                          let terrazaChecked = terrazaCheckbox.checked;
                          let lavadoChecked = lavadoCheckbox.checked; // Será true si está marcado, false si no lo está.
                          let areaChecked = areaCheckbox.checked;

                          // Si quieres reaccionar cuando los checkboxes cambian de estado, puedes usar un event listener:
                          garageCheckbox.addEventListener('change', function() {
                              garageChecked = garageCheckbox.checked;
                              console.log('Garage:', garageChecked);  // Puedes ver el estado en la consola
                          });

                          aticoCheckbox.addEventListener('change', function() {
                              aticoChecked = aticoCheckbox.checked;
                              console.log('Atico:', aticoChecked);    // Puedes ver el estado en la consola
                          });

                          // Si quieres reaccionar cuando los checkboxes cambian de estado, puedes usar un event listener:
                          estacionamientoCheckbox.addEventListener('change', function() {
                              estacionamientoChecked = estacionamientoCheckbox.checked;
                              console.log('Estacionamiento:', estacionamientoChecked);  // Puedes ver el estado en la consola
                          });

                          terrazaCheckbox.addEventListener('change', function() {
                              terrazaChecked = terrazaCheckbox.checked;
                              console.log('terraza:', terrazaChecked);    // Puedes ver el estado en la consola
                          });

                          // Si quieres reaccionar cuando los checkboxes cambian de estado, puedes usar un event listener:
                          lavadoCheckbox.addEventListener('change', function() {
                              lavadoChecked = lavadoCheckbox.checked;
                              console.log('Estacionamiento:', lavadoChecked);  // Puedes ver el estado en la consola
                          });

                          areaCheckbox.addEventListener('change', function() {
                              areaChecked = areaCheckbox.checked;
                              console.log('terraza:', areaChecked);    // Puedes ver el estado en la consola
                          });

                          const nombrePropiedad = document.querySelector('[name="nombre_propiedad_in"]').value;
                          const descrip = document.querySelector('[name="description_in"]').value;
                          const tipoPropiedad = document.querySelector('[name="tipo_propiedad_in"]').value;
                          const precioIn = document.querySelector('[name="precio_in"]').value;
                          const antiguedadIn = document.querySelector('[name="anos_antiguedad_in"]').value;
                          const direccionIn = document.querySelector('[name="direccion_in"]').value;
                          const ciudadIn = document.querySelector('[name="ciudad_in"]').value;
                          const estadoIn = document.querySelector('[name="estado_in"]').value;
                          const paisIn = document.querySelector('[name="pais_in"]').value;
                          const codigoIn = document.querySelector('[name="codigo_in"]').value;
                          const mapsIn = document.querySelector('[name="maps_url_in"]').value;
                          const habitacionesIn = document.querySelector('[name="habitaciones_in"]').value;
                          const banosIn = document.querySelector('[name="banos_in"]').value;
                          const construccionIn = document.querySelector('[name="construccion_in"]').value;
                          const pisosIn = document.querySelector('[name="pisos_in"]').value;
                          const terrenoIn = document.querySelector('[name="terreno_in"]').value;


                          const { data: dataPropiedad, error: errorPropiedad } = await _supabase
                              .from('propiedades')
                              .insert([
                                  {
                                      nombre: nombrePropiedad,
                                      descripcion: descrip,
                                      tipo_propiedad: tipoPropiedad,
                                      precio: precioIn,
                                      antiguedad: antiguedadIn,
                                      direccion: direccionIn,
                                      ciudad: ciudadIn,
                                      estado: estadoIn,
                                      pais: paisIn,
                                      codigo_postal: codigoIn,
                                      url_maps: mapsIn,
                                      habitaciones: habitacionesIn,
                                      banos: banosIn,
                                      pisos: pisosIn,
                                      metros_construccion: construccionIn,
                                      metros_terreno: terrenoIn,
                                      garage: garageChecked,
                                      atico: aticoChecked,
                                      estacionamiento: estacionamientoChecked,
                                      terraza: terrazaChecked,
                                      cuarto_lavado: lavadoChecked,
                                      areas_verdes: areaChecked,
                                      vendedor_id: dataVendedor[0].id,
                                  }
                              ]);
                              async function uploadSelectedImages(propiedadId) {
                                // Borra las imágenes existentes en el contenedor "imageContainer2"
                                $('#imageContainer2').empty();

                                for (let i = 0; i < selectedImages.length; i++) {
                                  const file = selectedImages[i];
                                  const filePath = `uploads/${propiedadId}/${file.name}`;

                                  // Usa Supabase para subir el archivo
                                  const { error } = await _supabase.storage.from('Images_propiedades').upload(filePath, file);

                                  if (error) {
                                    console.error("Error al subir la imagen:", error);
                                  } else {
                                    console.log("Imagen subida exitosamente");
                                  }
                                }
                                // Una vez que se han subido todas las imágenes, puedes limpiar la variable.
                                selectedImages = [];
                              }
                              
                              async function subirImagenesPorPiso(propiedadId) {
                                  for (let input of imagenesPorPiso) {
                                      if (input.files.length > 0) {
                                          const file = input.files[0];
                                          const filePath = `uploads/${propiedadId}/pisos/${file.name}`;

                                          const { error } = await _supabase.storage.from('Images_propiedades').upload(filePath, file);
                                          if (error) {
                                              console.error("Error al subir la imagen:", error);
                                          } else {
                                              console.log("Imagen subida exitosamente a", filePath);
                                          }
                                      }
                                  }
                              }

                              if (errorPropiedad) {
                                  console.error('Error inserting propiedad:', errorPropiedad);
                              } else {
                                  console.log('Inserted propiedad:', dataPropiedad);
                                  const propiedadId = dataPropiedad[0].id; // Accede al ID de la propiedad

                              // Luego, puedes realizar otras operaciones con la propiedad, como subir imágenes
                              await uploadSelectedImages(propiedadId);
                              await subirImagenesPorPiso(propiedadId);
                              location.reload()
                              }
                              

                              
}
                          let selectedImages = [];

                          $(document).ready(async function() {
                            $('#imagenesPropiedad').change(async function() {
                              if (this.files && this.files[0]) {
                                selectedImages.push(this.files[0]);
                                  const reader = new FileReader();
                                  reader.onload = async function(e) {
                                          const newImageDiv = `
                                              <div class="col-lg-3">
                                                  <div class="profile-box position-relative d-md-flex align-items-end mb50">
                                                      <div class="profile-img position-relative overflow-hidden bdrs12 mb20-sm">
                                                          <img class="w-100" src="${e.target.result}" alt="Uploaded Image">
                                                          <a href="#" class="tag-del" data-bs-toggle="tooltip" data-bs-placement="top" title="" aria-label="Delete Item"><span class="fas fa-trash-can"></span></a>
                                                      </div>
                                                  </div>
                                              </div>
                                          `;
                                          $('#imageContainer').append(newImageDiv);
                                          // Iniciar tooltips (si estás usando Bootstrap)
                                          $('[data-bs-toggle="tooltip"]').tooltip();
                                      }
                                      reader.readAsDataURL(this.files[0]);
                                  }
                              });

                              

                              // Para manejar la eliminación de la imagen
                              $(document).on('click', '.tag-del', function(e) {
                                e.preventDefault();
                                const imageIndex = $(this).closest('.col-lg-3').index();
                                selectedImages.splice(imageIndex, 1); // Elimina la imagen del arreglo
                                $(this).closest('.col-lg-3').remove();
                              });



                              $('[data-bs-toggle="tooltip"]').tooltip();
                              $(document).on('click', '.tag-del', function(e) {
                                  e.preventDefault();
                                  $(this).closest('.col-lg-3').remove();
                              });

                              $(document).ready(function() {
                                $('#uploadButton').click(function() {
                                  uploadSelectedImages(propiedadId);
                                  subirImagenesPorPiso(propiedadId);
                                });
                              });

                          });

                          async function fetchAndDisplayImages() {
                          // Consultar Supabase para obtener la lista de imágenes
                          const { data, error } = await _supabase.storage.from('Images_propiedades').list('uploads/');

                          if (error) {
                              console.error("Error al obtener la lista de imágenes:", error);
                              return;
                          }

                          if (data && data.length) {
                              // Iterar sobre cada imagen y generar el HTML
                              data.forEach(async (image) => {
                                  const imageUrl = await _supabase.storage.from('Images_propiedades').getPublicUrl('uploads/' + image.name);

                                  const newImageDiv = `
                                      <div class="col-lg-3">
                                          <div class="profile-box position-relative d-md-flex align-items-end mb50">
                                              <div class="profile-img position-relative overflow-hidden bdrs12 mb20-sm">
                                                  <img class="w-100" src="${imageUrl.publicURL}" alt="Image">
                                                  <a href="#" class="tag-del" data-bs-toggle="tooltip" data-bs-placement="top" title="" aria-label="Delete Item"><span class="fas fa-trash-can"></span></a>
                                              </div>
                                          </div>
                                      </div>
                                  `;

                                  $('#imageContainer2').append(newImageDiv);
                                  $('[data-bs-toggle="tooltip"]').tooltip();
                              });
                          }
                      }
                      $(document).ready(function() {
                          fetchAndDisplayImages();
                      });

                      </script>
                        
                        <div class="row" id="imageContainer">
                        </div>
                        <!--
                        <div class="row" id="imageContainer2">
                        </div>-->
                        <div class="col-md-12">
                          <div class="d-sm-flex justify-content-between">
                            <a class="ud-btn btn-white" href="" data-nav="prev">Paso previo<i class="fal fa-arrow-right-long"></i></a>
                            <a class="ud-btn btn-dark" href="" data-nav="next">Siguiente paso<i class="fal fa-arrow-right-long"></i></a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="nav-item4" role="tabpanel" aria-labelledby="nav-item4-tab">
                      <div class="ps-widget bgc-white bdrs12 p30 overflow-hidden position-relative">
                        <form class="form-style1">
                          <div class="row">
                            <div class="col-sm-12">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Dirección de la propiedad</label>
                                <input type="text" class="form-control" name="direccion_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Ciudad</label>
                                <input type="text" class="form-control" name="ciudad_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Estado/Provincia</label>
                                <input type="text" class="form-control" name="estado_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">País</label>
                                <input type="text" class="form-control" name="pais_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Código postal</label>
                                <input type="text" class="form-control" name="codigo_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Url de maps</label>
                                <input type="text" class="form-control" name="maps_url_in" placeholder="">
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-12">
                              <div class="d-sm-flex justify-content-between">
                                <a class="ud-btn btn-white" href="" data-nav="prev">Paso previo<i class="fal fa-arrow-right-long"></i></a>
                                <a class="ud-btn btn-dark" href="" data-nav="next">Siguiente paso<i class="fal fa-arrow-right-long"></i></a>
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="nav-item5" role="tabpanel" aria-labelledby="nav-item5-tab">
                      <div class="ps-widget bgc-white bdrs12 p30 overflow-hidden position-relative">
                        <form class="form-style1">
                          <div class="row">
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10" >Número de habitaciones</label>
                                <input type="text" class="form-control" name="habitaciones_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Número de baños</label>
                                <input type="text" class="form-control" name="banos_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Construcción (metros cuadrados)</label>
                                <input type="text" class="form-control" name="construccion_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Número de pisos</label>
                                <input type="text" class="form-control" name="pisos_in" placeholder="">
                              </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="mb20">
                                    <label class="heading-color ff-heading fw600 mb10">Cargar imagen por piso</label>
                                    <div id="imagenesPorPiso"></div>
                                    <button type="button" onclick="agregarCampoImagen()">Añadir Imagen</button>
                                </div>
                            </div>

                            <script>
                              let imagenesPorPiso = [];
                              function agregarCampoImagen() {
                                  var numeroPisos = document.getElementsByName("pisos_in")[0].value;
                                  var contenedor = document.getElementById("imagenesPorPiso");
                                  contenedor.innerHTML = ''; // Limpiar campos existentes

                                  imagenesPorPiso = []; // Inicializar como array vacío
                                  for (var i = 0; i < numeroPisos; i++) {
                                      var input = document.createElement("input");
                                      input.type = "file";
                                      input.name = "imagenPiso_" + (i + 1);
                                      input.classList.add("form-control");
                                      contenedor.appendChild(input);
                                      imagenesPorPiso.push(input);
                                  }
                              }

                            </script>
                            <div class="col-sm-4">
                              <div class="mb20">
                                <label class="heading-color ff-heading fw600 mb10">Terreno (metros cuadrados)</label>
                                <input type="text" class="form-control" name="terreno_in" placeholder="">
                              </div>
                            </div>
                          </div>
                          
                          <div class="row">
                            <div class="col-sm-6 col-lg-3 col-xxl-2">
                              <div class="checkbox-style1">
                                <label class="custom_checkbox">Garage
                                  <input type="checkbox" name="garage_in" id="garageCheckbox">
                                  <span class="checkmark"></span>
                                </label>
                                <label class="custom_checkbox">Atico
                                  <input type="checkbox" name="atico_in" id="aticoCheckbox">
                                  <span class="checkmark"></span>
                                </label>
                              </div>
                            </div>
                            <div class="col-sm-6 col-lg-3 col-xxl-2">
                              <div class="checkbox-style1">
                                <label class="custom_checkbox">Lugar de estacionamiento
                                  <input type="checkbox" name="estacionamiento_in" id="estacionamientoCheckbox">
                                  <span class="checkmark"></span>
                                </label>
                                <label class="custom_checkbox">Terraza
                                  <input type="checkbox" name="terraza" id="terrazaCheckbox">
                                  <span class="checkmark"></span>
                                </label>
                              </div>
                            </div>
                            <div class="col-sm-6 col-lg-3 col-xxl-2">
                              <div class="checkbox-style1">
                                <label class="custom_checkbox">Cuarto de lavado
                                  <input type="checkbox" name="lavado_in" id="lavadoCheckbox">
                                  <span class="checkmark"></span>
                                </label>
                                <label class="custom_checkbox">Áreas verdes
                                  <input type="checkbox" name="areas_in" id="areaCheckbox">
                                  <span class="checkmark"></span>
                                </label>
                              </div>
                            </div>
                            <div class="col-md-12 mt30">
                              <div class="d-sm-flex justify-content-between">
                                <a class="ud-btn btn-white" href="" data-nav="prev">Paso previo<i class="fal fa-arrow-right-long"></i></a>
                                <button class="ud-btn btn-dark" type="submit" onclick="addVendedor2()" id="uploadButton">Enviar<i class="fal fa-arrow-right-long"></i></button>
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer class="dashboard_footer pt30 pb10">
          <div class="container">
            <div class="row items-center justify-content-center justify-content-md-between">
              <div class="col-auto">
                <div class="copyright-widget">
                  <p class="copyright-text ff-heading">
                    © Asesorista - Copyright 2023 | Desarrollado por
                    <a href="https://www.amoxtlidev.com"
                      >Amoxtli Web Developers</a
                    >
                  </p>
                </div>
              </div>
              <div class="col-auto">
                <div class="footer_bottom_right_widgets text-center text-lg-end">
                  <p class="footer-menu ff-heading">
                    <a href="#">Política de Privaciodad</a>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </div>
  <a class="scrollToHome" href="#"><i class="fas fa-angle-up"></i></a>
</div>
<!-- Wrapper End -->
<script src="js/jquery-3.6.4.min.js"></script> 
<script src="js/jquery-migrate-3.0.0.min.js"></script> 
<script src="js/popper.min.js"></script> 
<script src="js/bootstrap.min.js"></script> 
<script src="js/bootstrap-select.min.js"></script> 
<script src="js/jquery.mmenu.all.js"></script> 
<script src="js/ace-responsive-menu.js"></script>
<script src="js/jquery-scrolltofixed-min.js"></script>
<script src="js/dashboard-script.js"></script>
<!-- Custom script for all pages --> 
<script src="js/script.js"></script>
</body>
</html>