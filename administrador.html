<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="keywords"
      content="advanced search, agency, agent, classified, directory, house, listing, property, real estate, real estate agency, real estate agent, realestate, realtor, rental"
    />
    <meta name="description" content="Homez - Real Estate HTML Template" />
    <meta name="CreativeLayers" content="ATFN" />
    <!-- css file -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/ace-responsive-menu.css" />
    <link rel="stylesheet" href="css/menu.css" />
    <link rel="stylesheet" href="css/fontawesome.css" />
    <link rel="stylesheet" href="css/flaticon.css" />
    <link rel="stylesheet" href="css/bootstrap-select.min.css" />
    <link rel="stylesheet" href="css/ud-custom-spacing.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/animate.css" />
    <link rel="stylesheet" href="css/jquery-ui.min.css" />
    <!-- Responsive stylesheet -->
    <link rel="stylesheet" href="css/responsive.css" />
    <!-- Title -->
    <title>Asesorista</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" href="images/favicon.png" />
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body class="bgc-f7">
    <div class="wrapper ovh">
      <div class="preloader"></div>
      <div class="body_content">
        <!-- Our Compare Area -->
        <section class="our-compare pt60 pb60">
          <img
            src="images/icon/login-page-icon.svg"
            alt=""
            class="login-bg-icon wow fadeInLeft"
            data-wow-delay="300ms"
          />
          <div class="container">
            <div class="row wow fadeInRight" data-wow-delay="300ms">
              <div class="col-lg-6">
                <div
                  class="log-reg-form signup-modal form-style1 bgc-white p50 p30-sm default-box-shadow2 bdrs12"
                >
                  <div class="text-center mb40">
                    <img
                      class="mb25 main-logo"
                      src="images/main-logo.png"
                      alt=""
                    />
                    <h2>Sign in</h2>
                    <p class="text">
                      Bienvenido, ingrese sus credenciales de administrador
                    </p>
                  </div>
                  <div class="mb25">
                    <label class="form-label fw600 dark-color">Correo</label>
                    <input
                      type="email"
                      id="emailInput"
                      class="form-control"
                      placeholder="Ingrese su correo"
                    />
                  </div>
                  <div class="mb15">
                    <label class="form-label fw600 dark-color"
                      >Contraseña</label
                    >
                    <input
                      type="password"
                      id="passwordInput"
                      class="form-control"
                      placeholder="Ingrese su contraseña"
                    />
                  </div>
                  <div class="d-grid mb20">
                    <button id="loginButton" class="ud-btn btn-thm">
                      Iniciar sesión <i class="fal fa-arrow-right-long"></i>
                    </button>
                  </div>
                  <style>
                    .alert-message {
                      color: red;
                      margin-top: 10px;
                    }
                  </style>
                  <div id="messageLabel" class="alert-message"></div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <a class="scrollToHome" href="#"><i class="fas fa-angle-up"></i></a>
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.22.2"></script>

        <script>
          const SUPABASE_URL = "https://fhowgaxtehxvtcpiziyy.supabase.co";
          const SUPABASE_ANON_KEY =
            "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZob3dnYXh0ZWh4dnRjcGl6aXl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTA2OTA1NjQsImV4cCI6MjAwNjI2NjU2NH0.ZOc7XrEmDevg35_FT-s0HUQgA4uvq900D80j31G7R20";

          const _supabase = supabase.createClient(
            SUPABASE_URL,
            SUPABASE_ANON_KEY
          );
        </script>
        <script>
          async function checkLogin() {
            const emailInput = document.querySelector("#emailInput").value;
            const passwordInput =
              document.querySelector("#passwordInput").value;

            const { data: user, error } = await _supabase
              .from("administrador")
              .select("*")
              .eq("usuario", emailInput)
              .single();

            if (error) {
              console.error("Error fetching user data:", error);
              document.getElementById("messageLabel").textContent =
                "Datos de administrador no encontrados";
              return;
            }

            const passwordIsValid = passwordInput === user.contrasena;

            if (passwordIsValid) {
              window.location.href = "page-dashboard-add-property.html";
            } else {
              document.getElementById("messageLabel").textContent =
                "Correo electrónico o contraseña inválidos.";
            }
          }

          document
            .querySelector("#loginButton")
            .addEventListener("click", function (event) {
              event.preventDefault();
              checkLogin();
            });
        </script>
      </div>
    </div>
    <!-- Wrapper End -->
    <script src="js/jquery-3.6.4.min.js"></script>
    <script src="js/jquery-migrate-3.0.0.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery-scrolltofixed-min.js"></script>
    <script src="js/wow.min.js"></script>
    <!-- Custom script for all pages -->
    <script src="js/script.js"></script>
  </body>
</html>
